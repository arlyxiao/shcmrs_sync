.page-media-resources-public-forms
  = flash[:error]

  = form_tag '/public_resources/upload', :method => 'put', :multipart => true, :class => 'upload-public-file' do
    = hidden_field_tag :current_path, @current_dir.blank? ? '/' : @current_dir.path
    = file_field_tag :file
    %a.form-submit-button 上传文件

.page-media-resource-nav
  .go-parent-dir
    - if @current_dir.blank?
      %span.quiet 上一级
    - else
      :ruby
        url = @current_dir.dir.blank? ? "/public_resources" : File.join("/public_resources/user/#{params[:id]}/file", @current_dir.dir.path)
      %a{:href => url} 上一级

  .navs
    %span= link_to '公共资源根目录', '/public_resources'
    - media_resource_navs_dirs(@current_dir).each do |dir|
      %span= link_to dir.name, File.join("/public_resources/user/#{params[:id]}/file", dir.path)


.page-media-shared-resource-list
  - if @media_resources.blank?
    .media-resource-blank.quiet
      该共享目录下没有资源
  - else
    - @media_resources.each do |resource|
      :ruby
        klass = resource.is_dir? ? 'dir' : 'file'
        url = "/public_resources/user/#{resource.creator.id}/file#{resource.path}"
      .media-resource{:class => klass}
        = link_to resource.name, url, :class=>'link'
        .from-creator
          %span 来自
          %span= link_to "#{resource.creator.name}", "/users/#{resource.creator.id}"

